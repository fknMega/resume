<!DOCTYPE html>
<html lang="he">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>חולשה במערכת Mashov – OTP חלש | בלוג</title>

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="../assets/style.css">
</head>

<body class="page-blog-post animate-in">

<header class="navbar">
  <div class="navbar-inner">
    <a class="brand" href="../index.html">
      <span class="dot"></span>
      <span>Yaniv Perez</span>
    </a>
    <nav class="nav-links">
      <a href="../index.html">ראשי</a>
      <a href="../about.html">אודות</a>
      <a class="active" href="../blog.html">בלוג</a>
      <a href="../contact.html">צור קשר</a>
    </nav>
  </div>
</header>

<main>
<div class="container">

<section class="reveal">
  <div class="badge">Security</div>
  <h1 class="section-heading">חולשה במערכת Mashov – OTP ו-Rate Limiting חלש</h1>
  <p class="muted">ניתוח טכני של הסקת מידע, חשיפת APIs ולוגיקת אימות רופפת.</p>
</section>

<section>
<article class="card blog-card">
<div class="markdown-body">

<img src="https://i.ibb.co/RkDbBNkZ/image.png" alt="OTP Abuse Visualization">

<h2>מי אני ולמה אני כותב את זה</h2>
<p>אני תלמיד לשעבר שלמד והשתמש במערכת Mashov. כבר לפני כמה זמן, כשעוד הייתי בן 17, שמתי לב שיש בעיה במנגנון של שליחת קוד אימות (OTP).</p>
<p>בהתחלה זה היה סתם מתוך סקרנות. אפילו השתמשתי בזה פעם אחת “לכיף” כדי לעשות ספאם לחבר עם הודעות קוד. רק אחר כך הבנתי שזו לא סתם שטות, אלא בעיה אמיתית שיכולה לפגוע בפרטיות של תלמידים.</p>

<h2>רקע</h2>
<p>
במהלך שימוש רגיל במערכת Mashov, שמתי לב להתנהגות חריגה במנגנון שליחת קודי אימות (OTP).
התגובה של השרת השתנתה בהתאם לפרטים שנשלחו, ללא הגבלת קצב משמעותית.
</p>

<h2>איך גיליתי את זה</h2>
<ul>
  <li>בדיקה ידנית של תהליך התחברות דרך הדפדפן</li>
  <li>מעקב אחרי בקשות רשת (Network tab)</li>
  <li>זיהוי endpoints פתוחים ללא אימות מוקדם</li>
  <li>בדיקת תגובות שונות לאותם פרמטרים</li>
</ul>

<h2>APIs רלוונטיים (תיאור כללי)</h2>
<p>
המערכת חושפת:
</p>
<ul>
  <li>API ציבורי שמחזיר רשימת מוסדות</li>
  <li>API לשליחת קוד OTP שאינו מחייב session פעיל</li>
</ul>

<p>
השילוב בין שני אלו מאפשר מעבר שיטתי על מוסדות והצלבת פרטים.
</p>

<h2>זרימת הבקשות (High-Level)</h2>
<ol>
  <li>שליפת רשימת מוסדות (ללא התחברות)</li>
  <li>שליחת בקשת OTP עם צירוף פרטים</li>
  <li>ניתוח תגובת השרת (סטטוס / טקסט / זמן)</li>
  <li>הסקת מידע לפי ההבדלים</li>
</ol>

<h2>למה Rate Limiting נכשל כאן</h2>
<ul>
  <li>אין הגבלה מצטברת לפי משתמש</li>
  <li>אין הגבלה לפי טלפון</li>
  <li>Cloudflare מאשר קצב “נמוך-גבוה” לאורך זמן</li>
  <li>אין חסימה חכמה לפי דפוס</li>
</ul>

<h2>דוגמה לקוד (מנוטרל ומוחלף)</h2>


<pre><code class="language-python">

OTP_ENDPOINT = "https://example.com/api/otp"
SCHOOLS_ENDPOINT = "https://example.com/api/schools"

payload = {
  "phone": "05XXXXXXXX",
  "user_id": "ID_PLACEHOLDER",
  "school_code": 123456
}

# Send request
response = post(OTP_ENDPOINT, payload)

# Observe differences in response
if response.status == 200:
    analyze(response.body)
</code></pre>

<hr>

<h2>תוכנה שבניתי והיכולות שלה</h2>
<p>כדי להבין את הבעיה לעומק, כתבתי תוכנה שבודקת את ההתנהגות של ה-API בקצב גבוה ובצורה שיטתית.</p>
<p>באמצעות החולשה, התוכנה <strong>מסוגלת להסיק</strong> את המידע הבא:</p>
<ul>
  <li>למצוא <strong>מספר תעודת זהות של תלמיד</strong>(בכמה שעות) אם יודעים את מספר הטלפון שלו או את כתובת המייל</li>
  <li>למצוא <strong>בית ספר של תלמיד</strong>(בפחות מדקה) אם יודעים את השם המלא שלו ואת מספר הטלפון או המייל</li>
  <li>למצוא <strong>מספר טלפון מלא של תלמיד</strong>(בכמה שעות) אם יודעים את השם המלא ואת בית הספר</li>
</ul>
<p>המידע לא “נשלף” ישירות, אלא מוסק לפי תגובות שונות של המערכת.</p>

<hr>

<h2>מה אפשר לעשות עם זה (לרעה)</h2>
<p>אם מישהו רוצה לנצל את זה, הוא יכול:</p>
<ul>
  <li>לעשות ספאם לטלפונים של תלמידים</li>
  <li>לבדוק אם מספר טלפון שייך לתלמיד במערכת</li>
  <li>לקשר בין שם, בית ספר, טלפון ות״ז</li>
  <li>להטריד אנשים, כולל קטינים</li>
</ul>
<p>אני לא עשיתי דברים כאלה מעבר לשטות חד-פעמית, אבל ברור שמישהו אחר כן יכול.</p>

<hr>

<h2>מה ניתן להסיק מהתגובה</h2>
<ul>
  <li>קיום משתמש במערכת</li>
  <li>שייכות לבית ספר</li>
  <li>התאמה בין פרטים אישיים</li>
</ul>

<h2>סיכון אמיתי</h2>
<ul>
  <li>פגיעה בפרטיות תלמידים</li>
  <li>ספאם והטרדה</li>
  <li>בניית מאגרי מידע עקיפים</li>
  <li>חשיפה משפטית</li>
</ul>

<h2>המלצות תיקון</h2>
<ul>
  <li>Rate Limiting חכם ומצטבר</li>
  <li>תגובה אחידה לחלוטין</li>
  <li>אימות לפני OTP</li>
  <li>ניטור דפוסי שימוש</li>
</ul>

<blockquote>
זו לא חולשה מתוחכמת — ודווקא בגלל זה היא מסוכנת.
</blockquote>

</div>
</article>
</section>

</div>
</main>

<footer class="footer">
  <div>© בלוג טכני · תוכן מחקרי בלבד</div>
</footer>

<script src="../assets/main.js"></script>
</body>
</html>
